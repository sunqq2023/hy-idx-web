# æ•°å­—ç»æµ Web åº”ç”¨

åŸºäº React + TypeScript + Vite æ„å»ºçš„ Web3 DAppï¼Œæ”¯æŒå¤šé“¾éƒ¨ç½²å’Œæœ¬åœ°å¼€å‘æµ‹è¯•ã€‚

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å¼€å‘ç¯å¢ƒ](#å¼€å‘ç¯å¢ƒ)
- [å¤šé“¾æ”¯æŒ](#å¤šé“¾æ”¯æŒ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¸¸ç”¨å‘½ä»¤](#å¸¸ç”¨å‘½ä»¤)
- [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
- [éƒ¨ç½²](#éƒ¨ç½²)
- [æ–‡æ¡£](#æ–‡æ¡£)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# ä¸»ç½‘ + æµ‹è¯•ç½‘æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
npm run dev

# è®¿é—® http://localhost:3001
```

---

## ğŸ’» å¼€å‘ç¯å¢ƒ

### ç³»ç»Ÿè¦æ±‚

- Node.js >= 18
- npm >= 9

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 6
- **Web3**: Wagmi + RainbowKit + Ethers.js
- **UI ç»„ä»¶**: Ant Design Mobile
- **çŠ¶æ€ç®¡ç†**: MobX
- **æ ·å¼**: Tailwind CSS 4
- **è·¯ç”±**: React Router 6

---

## ğŸŒ å¤šé“¾æ”¯æŒ

æœ¬é¡¹ç›®æ”¯æŒä¸‰ç§è¿è¡Œæ¨¡å¼ï¼Œé€šè¿‡ä¸åŒçš„å¯åŠ¨å‘½ä»¤æ¥åˆ‡æ¢ï¼š

### 1ï¸âƒ£ ä¸»ç½‘ + æµ‹è¯•ç½‘æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

```bash
npm run dev
```

**ç‰¹ç‚¹ï¼š**

- âœ… åŒæ—¶æ”¯æŒ BSC ä¸»ç½‘ (Chain ID 56) å’Œ BSC æµ‹è¯•ç½‘ (Chain ID 97)
- âœ… ç”¨æˆ·é€šè¿‡é’±åŒ…åˆ‡æ¢ç½‘ç»œ
- âœ… æ— éœ€ä»»ä½•é…ç½®
- âœ… é€‚åˆæ—¥å¸¸å¼€å‘

**ä½¿ç”¨åœºæ™¯ï¼š**

- æ—¥å¸¸å¼€å‘å’Œè°ƒè¯•
- æµ‹è¯•å·²éƒ¨ç½²çš„åˆçº¦
- ä¸çœŸå®ç½‘ç»œäº¤äº’

---

### 2ï¸âƒ£ Anvil Fork æ¨¡å¼

```bash
# ç»ˆç«¯ 1: å¯åŠ¨ Anvil Fork (åœ¨ hy-contract ç›®å½•)
cd ../hy-contract
npm run start-fork

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯
npm run dev:fork
```

**ç‰¹ç‚¹ï¼š**

- âœ… Fork è‡ª BSC ä¸»ç½‘ï¼Œæ‹¥æœ‰ä¸»ç½‘çš„æ‰€æœ‰æ•°æ®
- âœ… æœ¬åœ°æ‰§è¡Œï¼Œä¸æ¶ˆè€—çœŸå® gas
- âœ… Chain ID: 1056
- âœ… å¯ä»¥æµ‹è¯•ä¸»ç½‘æ•°æ®äº¤äº’

**ä½¿ç”¨åœºæ™¯ï¼š**

- æµ‹è¯•ä¸»ç½‘æ•°æ®äº¤äº’
- æµ‹è¯•åˆçº¦å‡çº§è„šæœ¬
- å®‰å…¨æµ‹è¯•æ–°åŠŸèƒ½

**é’±åŒ…é…ç½®ï¼š**

```
ç½‘ç»œåç§°: Anvil Fork (BSC)
RPC URL: http://127.0.0.1:8545
Chain ID: 1056
è´§å¸ç¬¦å·: BNB
```

**æµ‹è¯•è´¦æˆ·ï¼š**

```
åœ°å€: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
ç§é’¥: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
ä½™é¢: 10000 BNB
âš ï¸ ä»…ç”¨äºæµ‹è¯•ï¼Œæ°¸è¿œä¸è¦åœ¨ä¸»ç½‘ä½¿ç”¨ï¼
```

---

### 3ï¸âƒ£ Anvil Local æ¨¡å¼

```bash
# ç»ˆç«¯ 1: å¯åŠ¨ Anvil Local (åœ¨ hy-contract ç›®å½•)
cd ../hy-contract
npm run start-anvil

# ç»ˆç«¯ 2: éƒ¨ç½²åˆçº¦
forge script script/deployContracts.s.sol \
  --rpc-url http://127.0.0.1:8545 \
  --broadcast -vvv

# ç»ˆç«¯ 3: æ›´æ–° .env.local ä¸­çš„åˆçº¦åœ°å€ï¼Œç„¶åå¯åŠ¨å‰ç«¯
npm run dev:local
```

**ç‰¹ç‚¹ï¼š**

- âœ… å®Œå…¨ç‹¬ç«‹çš„æœ¬åœ°é“¾
- âœ… éœ€è¦éƒ¨ç½²æ‰€æœ‰åˆçº¦
- âœ… Chain ID: 31337
- âœ… å®Œå…¨å¯æ§çš„æµ‹è¯•ç¯å¢ƒ

**ä½¿ç”¨åœºæ™¯ï¼š**

- æµ‹è¯•æ–°åˆçº¦
- æµ‹è¯•åˆçº¦éƒ¨ç½²æµç¨‹
- å®Œå…¨éš”ç¦»çš„æµ‹è¯•ç¯å¢ƒ

**é’±åŒ…é…ç½®ï¼š**

```
ç½‘ç»œåç§°: Anvil Local
RPC URL: http://127.0.0.1:8545
Chain ID: 31337
è´§å¸ç¬¦å·: ETH
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
hy-web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/           # å›¾ç‰‡å­˜å‚¨
â”‚   â”œâ”€â”€ components/       # ç³»ç»Ÿç»„ä»¶ï¼ˆé¡¶éƒ¨å¯¼èˆªæ ã€æ ‡ç­¾é¡µåˆ‡æ¢æ ã€åº•éƒ¨å¼¹çª—ï¼‰
â”‚   â”œâ”€â”€ constants/        # å¸¸é‡å’Œåˆçº¦é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts      # ç³»ç»Ÿåˆçº¦åœ°å€ã€åˆçº¦ ABIã€é“¾é…ç½®
â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ æ‰¹é‡ç­¾åäº¤æ˜“
â”‚   â”‚   â”œâ”€â”€ è·å–ç”¨æˆ·æˆæƒæƒ…å†µ
â”‚   â”‚   â””â”€â”€ æ£€æµ‹ç”¨æˆ·é’±åŒ…åœ°å€å˜åŒ–
â”‚   â”œâ”€â”€ layout/           # é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ user/         # ç”¨æˆ·ç›¸å…³é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ addFuel/              # æ·»åŠ ç‡ƒæ–™é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ClaimMix/             # é¢†å– MIX é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ExchangeIdx/          # å…‘æ¢ IDX é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MachineDetail/        # çŸ¿æœºè¯¦æƒ…é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MachineTx/            # çŸ¿æœºäº¤æ˜“é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MyOrders/             # æˆ‘çš„è®¢å•é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MyPublishMachineTx/   # æˆ‘å‘å¸ƒçš„çŸ¿æœºå†å²è®°å½•é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ UserTransferMachine/  # è½¬è®©å­çŸ¿æœºé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ SellToPlatform/       # å–ç»™å¹³å°é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ SyntheticMachine/     # åˆæˆçŸ¿æœºé¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ UserTxHistory/        # ç”¨æˆ·æ‰€æœ‰å†å²äº¤æ˜“è®°å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ SalePersonPage.tsx        # é”€å”®å‘˜é¡µé¢
â”‚   â”‚   â”œâ”€â”€ SalepersonTxHistory.tsx   # é”€å”®å‘˜å†å²è®°å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ MakeMHistory.tsx          # é“¸é€ æ¯çŸ¿æœºå†å²è®°å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ MakeMotherMiningMachine.tsx # é“¸é€ æ¯çŸ¿æœºé¡µé¢
â”‚   â”‚   â””â”€â”€ TransferMachine.tsx       # è½¬è®©æ¯çŸ¿æœºé¡µé¢
â”‚   â”œâ”€â”€ proviers/         # Web3 Provider é…ç½®
â”‚   â”‚   â”œâ”€â”€ Wagmi é…ç½®
â”‚   â”‚   â”œâ”€â”€ RainbowKit é…ç½®
â”‚   â”‚   â””â”€â”€ React Query é…ç½®
â”‚   â”œâ”€â”€ router/           # é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ stores/           # MobX å…¨å±€æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ æ ¼å¼åŒ–åœ°å€
â”‚   â”‚   â”œâ”€â”€ æ—¶é—´æˆ³è½¬æ¢
â”‚   â”‚   â””â”€â”€ å…¶ä»–å¸¸ç”¨æ–¹æ³•
â”‚   â””â”€â”€ App.tsx           # åº”ç”¨å…¥å£
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”‚   â”œâ”€â”€ MULTI_CHAIN_GUIDE.md           # å®Œæ•´çš„å¤šé“¾é…ç½®æŒ‡å—
â”‚   â””â”€â”€ [åˆçº¦æ–‡æ¡£...]
â”œâ”€â”€ .env                  # åŸºç¡€é…ç½®
â”œâ”€â”€ .env.fork             # Fork æ¨¡å¼é…ç½®
â”œâ”€â”€ .env.local            # Local æ¨¡å¼é…ç½®
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts        # Vite æ„å»ºé…ç½®
â”œâ”€â”€ tailwind.config.js    # Tailwind é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ QUICK_START.md        # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ MIGRATION_CHECKLIST.md # è¿ç§»æ£€æŸ¥æ¸…å•
â””â”€â”€ README.md             # æœ¬æ–‡ä»¶
```

### ä¸»è¦é¡µé¢è¯´æ˜

#### é”€å”®å‘˜ç›¸å…³

- **SalePersonPage.tsx** - é”€å”®å‘˜é¡µé¢
- **SalepersonTxHistory.tsx** - é”€å”®å‘˜å†å²è®°å½•é¡µé¢

#### æ¯çŸ¿æœºç›¸å…³

- **MakeMotherMiningMachine.tsx** - é“¸é€ æ¯çŸ¿æœºé¡µé¢
- **MakeMHistory.tsx** - é“¸é€ æ¯çŸ¿æœºå†å²è®°å½•é¡µé¢
- **TransferMachine.tsx** - è½¬è®©æ¯çŸ¿æœºé¡µé¢

#### ç”¨æˆ·åŠŸèƒ½

- **addFuel** - æ·»åŠ ç‡ƒæ–™é¡µé¢
- **ClaimMix** - é¢†å– MIX é¡µé¢
- **ExchangeIdx** - å…‘æ¢ IDX é¡µé¢
- **MachineDetail** - çŸ¿æœºè¯¦æƒ…é¡µé¢
- **MachineTx** - çŸ¿æœºäº¤æ˜“é¡µé¢
- **MyOrders** - æˆ‘çš„è®¢å•é¡µé¢
- **MyPublishMachineTx** - æˆ‘å‘å¸ƒçš„çŸ¿æœºå†å²è®°å½•é¡µé¢
- **UserTransferMachine** - è½¬è®©å­çŸ¿æœºé¡µé¢
- **SellToPlatform** - å–ç»™å¹³å°é¡µé¢
- **SyntheticMachine** - åˆæˆçŸ¿æœºé¡µé¢
- **UserTxHistory** - ç”¨æˆ·æ‰€æœ‰å†å²äº¤æ˜“è®°å½•é¡µé¢ï¼ˆåŒ…æ‹¬è½¬è®©å­çŸ¿æœºã€æŒ‚å”®ã€è´­ä¹°æ¯çŸ¿æœºï¼‰

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### å¼€å‘

```bash
# ä¸»ç½‘ + æµ‹è¯•ç½‘æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
npm run dev

# Anvil Fork æ¨¡å¼
npm run dev:fork

# Anvil Local æ¨¡å¼
npm run dev:local
```

### æ„å»º

```bash
# ç”Ÿäº§æ„å»º
npm run build
```

### é¢„è§ˆ

```bash
# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

### ä»£ç æ£€æŸ¥

```bash
# ESLint æ£€æŸ¥
npm run lint
```

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### é…ç½®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶              | ç”¨é€”                     | æäº¤åˆ° git |
| ----------------- | ------------------------ | ---------- |
| `.env`            | åŸºç¡€é…ç½®ï¼ˆæ‰€æœ‰æ¨¡å¼å…±äº«ï¼‰ | âœ…         |
| `.env.fork`       | Fork æ¨¡å¼é…ç½®            | âœ…         |
| `.env.local`      | Local æ¨¡å¼é…ç½®           | âœ…         |
| `.env.production` | ç”Ÿäº§ç¯å¢ƒé…ç½®             | âœ…         |

### é…ç½®æ–‡ä»¶å’Œå¯åŠ¨å‘½ä»¤çš„å…³ç³»

| å¯åŠ¨å‘½ä»¤            | Mode        | åŠ è½½çš„é…ç½®æ–‡ä»¶    | æ”¯æŒçš„ç½‘ç»œ            |
| ------------------- | ----------- | ----------------- | --------------------- |
| `npm run dev`       | development | `.env`            | BSC ä¸»ç½‘ + BSC æµ‹è¯•ç½‘ |
| `npm run dev:fork`  | fork        | `.env.fork`       | Anvil Fork (1056)     |
| `npm run dev:local` | local       | `.env.local`      | Anvil Local (31337)   |
| `npm run build`     | production  | `.env.production` | BSC ä¸»ç½‘ + BSC æµ‹è¯•ç½‘ |

### æ‰‹æœºè®¿é—®é…ç½®

å¦‚æœéœ€è¦åœ¨æ‰‹æœºä¸Šè®¿é—®å¼€å‘æœåŠ¡å™¨ï¼š

1. **è·å–ç”µè„‘ IP**ï¼š

   ```bash
   # macOS/Linux
   ifconfig | grep "inet " | grep -v 127.0.0.1

   # ç¤ºä¾‹è¾“å‡º: inet 192.168.1.176
   ```

2. **ä¿®æ”¹ `.env.fork`**ï¼š

   ```bash
   VITE_CHAIN_ID=1056
   VITE_RPC_URL=http://192.168.1.176:8545  # ä½¿ç”¨ä½ çš„ IP
   ```

3. **é‡å¯æœåŠ¡**ï¼š

   ```bash
   # é‡å¯ Anvil
   cd ../hy-contract
   npm run stop-fork
   npm run start-fork

   # é‡å¯å‰ç«¯
   npm run dev:fork
   ```

4. **æ‰‹æœºè®¿é—®**ï¼š
   - æµè§ˆå™¨ï¼š`http://192.168.1.176:3001`
   - é’±åŒ… RPCï¼š`http://192.168.1.176:8545`

---

## ğŸš¢ éƒ¨ç½²

### Cloudflare Pages éƒ¨ç½²

#### æ–¹æ³• 1: è¿æ¥ Git ä»“åº“ï¼ˆæ¨èï¼‰

1. ç™»å½• Cloudflare Dashboard
2. è¿›å…¥ Pagesï¼Œåˆ›å»ºæ–°é¡¹ç›®
3. è¿æ¥ä½ çš„ Git ä»“åº“
4. é…ç½®æ„å»ºè®¾ç½®ï¼š
   ```
   Build command: npm run build
   Build output directory: dist
   Root directory: hy-web
   Node version: 18 æˆ–æ›´é«˜
   ```
5. æ¯æ¬¡æ¨é€ä»£ç è‡ªåŠ¨éƒ¨ç½²

#### æ–¹æ³• 2: ä½¿ç”¨ Wrangler CLI

```bash
# æ„å»º
npm run build

# éƒ¨ç½²
npx wrangler pages deploy dist
```

#### éªŒè¯éƒ¨ç½²

è®¿é—®ä½ çš„ Cloudflare åŸŸåï¼Œæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
ğŸš€ Production mode: Using Mainnet + Testnet only
```

---

## ğŸ“š æ–‡æ¡£

### è¯¦ç»†æ–‡æ¡£

- **[docs/MULTI_CHAIN_GUIDE.md](./docs/MULTI_CHAIN_GUIDE.md)** - å®Œæ•´çš„å¤šé“¾é…ç½®æŒ‡å—ï¼ˆåŒ…å«é…ç½®ã€æµ‹è¯•å’ŒéªŒè¯ï¼‰

### åˆçº¦æ–‡æ¡£

- **[docs/MiningMachineHistory åˆçº¦æ¥å£è¯´æ˜.md](./docs/MiningMachineHistory%20åˆçº¦æ¥å£è¯´æ˜ã€‹.md)**
- **[docs/MiningMachineSystemStorage åˆçº¦æ¥å£è¯´æ˜.md](./docs/MiningMachineSystemStorage%20åˆçº¦æ¥å£è¯´æ˜ã€‹.md)**
- æ›´å¤šåˆçº¦æ–‡æ¡£è¯·æŸ¥çœ‹ `docs/` ç›®å½•

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ— æ³•è¿æ¥åˆ° Anvil

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æ£€æŸ¥ Anvil çŠ¶æ€
cd ../hy-contract
npm run check-anvil

# é‡å¯ Anvil
npm run stop-fork && npm run start-fork
```

### é—®é¢˜ 2: ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆï¼š**

1. ç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„å‘½ä»¤ï¼ˆ`dev:fork` ä¸æ˜¯ `dev`ï¼‰
2. é‡å¯å‰ç«¯æœåŠ¡å™¨ï¼ˆCtrl+C ç„¶åé‡æ–°è¿è¡Œï¼‰
3. ç¡¬åˆ·æ–°æµè§ˆå™¨ï¼ˆCtrl+Shift+Rï¼‰

### é—®é¢˜ 3: æ‰‹æœºæ— æ³•è®¿é—®

**è§£å†³æ–¹æ¡ˆï¼š**

1. ç¡®è®¤æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ä¸ª WiFi
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
3. ç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„ IP åœ°å€

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

ISC

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ–‡æ¡£æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

**Happy Coding!** ğŸ‰
